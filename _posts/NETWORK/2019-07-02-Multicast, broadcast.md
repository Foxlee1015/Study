---
layout: post
title: Multicast, broadcast
categories: NETWORK

---

![20190702_143427](https://user-images.githubusercontent.com/47915302/60485033-8a601d80-9cd6-11e9-9bc3-883cffaf3365.png)



> # Multicast

* UDP 기반으로 하나 이상의 송신자들이 특정한 그룹에 속해있는 하나 이상의 수신자들에게 데이터를 전송하는 방식. 특정한 그룹을 선택하는 기준은 D클래스의 IP 주소를 이용함. 
* D클래스는 32bit 주소체계에서 상위 4개의 비트가 "1110" 으로 고정되어 있으며 하위 28bit 가 그룹의 ID 로 사용되는 특별한 주소형식을 가지는데 리를 10진수로 표현하여 보면 224.000.000.000 ~ 239.255.255.255 로 표현할 수 있음.

* 약 150여명의 사용자가 있는 한 네트워크에서 100명 에게 데이터를 전송 하기 위한 상황이라면 100명에게 일일이 유니캐스트로 보낼 수도 없고 100명을 위해 50명은 무시하고 브로트캐스트로 보낼 수도 없고, 이럴 때 사용 하는 게 멀티캐스트 입니다.

* 멀티캐스트의 원리는 멀티캐스트 전송을 위해서는 헤더에 수신자의 주소 대신 수신자들이 참여하고 있는 그룹주소를 표시하여 패킷을 전송 한다. 멀티캐스트 전송을 위한 그룹 주소는 D-class IP 주소(224.0.0.0~239.255.255.255)로 전세계 개개의 인터넷 호스트를 나타내는 A, B,C-class IP주소와는 달리 실제의 호스트를 나타내는 주소가 아니며, 그룹 주소를 갖는 멀티캐스트 패킷을 전송받은 수신자는 자신이 패킷의 그룹에 속해 있는 가를 판단해 패킷의 수용여부를 결정합니다. 그러나 현재 인터넷상의 라우터들이 대부분 유니캐스트만을 지원하기 때문에 멀티캐스트 패킷을 전송하기 위해서는 멀태캐스트 라우터 사이에 터널링(tunneling)이라는 개념을 사용하여 캡슐화(encapsulation)된 채킷을 전송 합니다. 즉 멀티캐스트 주소를 가진 데이터 패킷 헤더 앞에 멀티캐스트를 지원하지 않는 일반라우터들을 거칠 때 기존의 유니캐스트 패킷고 같은 방법으로 라우팅 되어 최종적으로 터널의 종착지로 전송될 수 있게 하는 것입니다.


> # Broadcast

* 하나의 네트워크 전체의 통신방법 입니다. 같은 네트워크에 포함된 장비들에게 거부권은 없고 일단 무조건 수신하고 봐야하는 통신법 입니다. 예를 들어 동네이장님이 마이크로 마을 전체에 방송하는 것 과 같은 원리입니다. 일단 방송하면 싫어도 듣게 되겠죠? 그런 원리입니다. 유니캐스트 와는 다르게 무조건 받아들어야 하기 때문에 CPU까지 패킷이 올라가게 되고, 컴퓨터 자체에 부담이 증가하게 되는 것입니다.

* 브로드캐스트의 대표적인 사용 예는 ARP입니다. ARP 란 자신과 데이터 통신을 하기위한 다른 노드의 맥어드레스를 알아내기 위한 프로토콜입니다. 쉽게 말해 실직적인 통신은 IP주소가 아닌 맥어드레스로 이루어지는데, IP주소는 알고 잇지만 맥어드레스를 모를 때 사용하는 방법 입니다.


> 통  신

* 일대일 통신 : 유니캐스트
* 일대다 통신 : IP에서는 UDP만 가능 => 브로드 캐스트 : TTL 1, => 멀티 캐스트 : TTL 2 이상

# 유니캐스트
* 1:1통신 방법입니다. 데이터를 보내고자 하는 주소 (맥어드레스)를 프레임에 포함시켜 보내는 방식입니다. 그래서 그 맥 어드레스를 찾아 통신하게 되고 같은 네트워크에 있는 노드들은 자신의 맥 어드레스 아닌 경우엔 패킷이 CPU 까지 전송되지 않고 LAN카드에서 "맥 어드레스가 틀리네" 하면서 버리게 되는 것 입니다. 그래서 CPU까지 영향을 미치지 않고 원하는 노드랑 통신이 가능 한 방식 입니다.



