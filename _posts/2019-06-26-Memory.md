---
layout: post
title: Memory
categories:
- blog
---
2019-06-26-Memory.md


* 시간적 지역성 : 어떤 데이터가 참조되면 **다시** 참조될 가능성이 높다
* 공간적 지역성 : 어떤 데이터가 참조되면 그 **주변의 데이터**도 참조될 가능성이 높음


* 메모리 계층구조
- 서로 다른 속도와 크기를 가지는 여러 계층의 메모리로 구성됨
- 빠른 메모리(비싸고, 용량이 작은)는 프로세서에 가깝게 두고, 느리지만 저렴하고 용량이 큰 메모리를 프로세서에서 멀어짐
- // 블록 - 메모리 계층간의 정보의 최소 단위 // 적중률(hit rate)- 메모리 접근 중 상위 계층에서 찾을 수 있는 것의 비율 = 메모리 계층의 성능 평가 척도 // 실패율(miss rate) - 찾을 수 없는 것의 비율
- 상위 계층에서 정보를 찾지 못하면 실패 -> 하위 계층으로 이동 
- 적중 시간 hit time = 메모리 계층구조의 상위 계층에 접근하는 시간, 적중 또는 실패인지 결정하는 데 필요한 시간
- 실패 손실 miss penalty = 하위 계층에서 해당 블록을 가져와서 상위 계층 블록과 교체하는 시간 + 해당 블록을 프로세서에 보내는 데 걸리는 시간 


- - -
> 메모리 기술
1. 메인 메모리 main memory = DRAM // 셀이 기억되는 값이 전하로 커패시터에 저장되며, 저장된 값을 읽거나 새로 쓰기 위해서 하나의 트랜지스터 사용
(1 비트 = 1 트랜지스터)
2. 캐시 cache = SRAM // 전력이 공급되는 한 데이터 유지 // 데이터 상관없이 접근 시간 같고, 비트당 6~8 트랜지스터 사용. 
3. 플래시 메모리
4. 자기 디스크 
* 속도, 비용   SRAM > DRAM > FLASH MEMORY / Magnetic disk


* **레지스터 - CPU 안에 내장되어 연산을 위한 저장소 제공, 캐쉬 = CPU 와 DRAM 사이에서 중간 저장소 역할**
![CPU](https://user-images.githubusercontent.com/47915302/60147821-ccd2b780-9809-11e9-8b3c-e0cc913a7972.jpg)

* 메모리들은 프로그램 실행하는 동안 데이터의 입력 및 출력 담당
* 하드디스크 - 프로그램 실행 -> 메인 메모리
* 메인 메모리의 일부 데이터 실행을 위해 L2 캐시로 이동 - L2 의 일부 데이터 L1 캐시로 이동 -> L1 캐시에 있는 데이터중 연산이 필요한 데이터는 레지스터로 이동 
* 연산이 필요한 데이터가 없을 경우 역순으로 L1 -> L2 -> 메인 메모리 -> 하드디스크 연산에 필요한 데이터 찾음

* L1 은 레지스터와 메인 메모리간 속도차이에 의한 성능 저하를 막히 위해 메인 메모리의 저장된 데이터중 자주 접근하는 데이터를 저장한다. ( CPU 가 연산을 하기 위해선 데이터를 가져와서 연산후 연산 결과를 메모리에 저장후 다음 작업이 가능하지만 데이터를 가져오고 저장하는 작업이 느려 처리속도가 느림 )

* L1 캐시는 CPU 내부에 존재하므로 L1 캐시에서 참조할 경우 속도 저하 발생하지 않음. 
* L1 에 저장가능한 데이터가 한정적이므로 CPU 내부 L2 캐시에도 저장하여 메인 메모리에 대한 접근을 줄임 
