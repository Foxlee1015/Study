---
layout: post
title: Apache(2)
categories:
- blog
---
1-1) Apache MPM (prefork, worker)

< prefork 방식 >

– 자식 프로세스를 미리 준비해두는 방식

– 자식 프로세스는 최대 1024개

– 하나의 자식 프로세스당 1개의 스레드 연결

– 스레드간 메모리 공유를 하지 않아 독립적사용으로 안정적이나 메모리를 많이 사용함

< worker 방식 >

– 프로세스당 여러개의 스레드 연결

– 스레드간 메모리를 공유하여 메모리 사용량이 비교적 적음

– 통신량이 많은 서버에 적합

< event 방식>

– 아파치 2.4.x 버전부터 생성된 방식

– worker 방식을 기반으로 함

– keepalive 시에 클라이언트로부터 요청을 기다리고 있는 자식 프로세스 또는 자식 스레드 전체를 keep하게

되는 문제를 해결하기 위하여 리스닝 소켓과 기타 모든 소켓을 처리하는 각 프로세스를 위한 전용 리스너

스레드를 사용

< prefork 방식과 worker 방식의 차이>

– worker가 Prefork에 비해 적은 메모리를 사용한다.

– worker: 통신량이 많은 서버에 적절한 형태를 가진다.

– prefork: 안전하지 않은 제 3자가 만든 모듈을 사용할 수 있다.

– prefork: 디버깅이 빈약한 플랫폼에서 쉽게 디버깅 할 수 있다.

– prefork 방식과 worker 방식의 속도는 비슷하다.

대부분 prefork 방식이 기본적으로 사용되며, 사용자가 많은 경우에는 worker방식을 사용합니다.
